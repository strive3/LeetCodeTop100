package leetcode.listnode;
//ç»™å®šä¸€ä¸ªé“¾è¡¨çš„å¤´èŠ‚ç‚¹ head ï¼Œè¿”å›é“¾è¡¨å¼€å§‹å…¥ç¯çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚ å¦‚æœé“¾è¡¨æ— ç¯ï¼Œåˆ™è¿”å› nullã€‚
//
// å¦‚æœé“¾è¡¨ä¸­æœ‰æŸä¸ªèŠ‚ç‚¹ï¼Œå¯ä»¥é€šè¿‡è¿ç»­è·Ÿè¸ª next æŒ‡é’ˆå†æ¬¡åˆ°è¾¾ï¼Œåˆ™é“¾è¡¨ä¸­å­˜åœ¨ç¯ã€‚ ä¸ºäº†è¡¨ç¤ºç»™å®šé“¾è¡¨ä¸­çš„ç¯ï¼Œè¯„æµ‹ç³»ç»Ÿå†…éƒ¨ä½¿ç”¨æ•´æ•° pos æ¥è¡¨ç¤ºé“¾è¡¨å°¾è¿æ¥åˆ°
//é“¾è¡¨ä¸­çš„ä½ç½®ï¼ˆç´¢å¼•ä» 0 å¼€å§‹ï¼‰ã€‚å¦‚æœ pos æ˜¯ -1ï¼Œåˆ™åœ¨è¯¥é“¾è¡¨ä¸­æ²¡æœ‰ç¯ã€‚æ³¨æ„ï¼špos ä¸ä½œä¸ºå‚æ•°è¿›è¡Œä¼ é€’ï¼Œä»…ä»…æ˜¯ä¸ºäº†æ ‡è¯†é“¾è¡¨çš„å®é™…æƒ…å†µã€‚
//
// ä¸å…è®¸ä¿®æ”¹ é“¾è¡¨ã€‚
//
//
//
//
//
//
// ç¤ºä¾‹ 1ï¼š
//
//
//
//
//è¾“å…¥ï¼šhead = [3,2,0,-4], pos = 1
//è¾“å‡ºï¼šè¿”å›ç´¢å¼•ä¸º 1 çš„é“¾è¡¨èŠ‚ç‚¹
//è§£é‡Šï¼šé“¾è¡¨ä¸­æœ‰ä¸€ä¸ªç¯ï¼Œå…¶å°¾éƒ¨è¿æ¥åˆ°ç¬¬äºŒä¸ªèŠ‚ç‚¹ã€‚
//
//
// ç¤ºä¾‹ 2ï¼š
//
//
//
//
//è¾“å…¥ï¼šhead = [1,2], pos = 0
//è¾“å‡ºï¼šè¿”å›ç´¢å¼•ä¸º 0 çš„é“¾è¡¨èŠ‚ç‚¹
//è§£é‡Šï¼šé“¾è¡¨ä¸­æœ‰ä¸€ä¸ªç¯ï¼Œå…¶å°¾éƒ¨è¿æ¥åˆ°ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚
//
//
// ç¤ºä¾‹ 3ï¼š
//
//
//
//
//è¾“å…¥ï¼šhead = [1], pos = -1
//è¾“å‡ºï¼šè¿”å› null
//è§£é‡Šï¼šé“¾è¡¨ä¸­æ²¡æœ‰ç¯ã€‚
//
//
//
//
// æç¤ºï¼š
//
//
// é“¾è¡¨ä¸­èŠ‚ç‚¹çš„æ•°ç›®èŒƒå›´åœ¨èŒƒå›´ [0, 10â´] å†…
// -10âµ <= Node.val <= 10âµ
// pos çš„å€¼ä¸º -1 æˆ–è€…é“¾è¡¨ä¸­çš„ä¸€ä¸ªæœ‰æ•ˆç´¢å¼•
//
//
//
//
// è¿›é˜¶ï¼šä½ æ˜¯å¦å¯ä»¥ä½¿ç”¨ O(1) ç©ºé—´è§£å†³æ­¤é¢˜ï¼Ÿ
//
// Related Topics å“ˆå¸Œè¡¨ é“¾è¡¨ åŒæŒ‡é’ˆ ğŸ‘ 2521 ğŸ‘ 0


//leetcode submit region begin(Prohibit modification and deletion)
/**
 * Definition for singly-linked list.
 * class ListNode {
 *     int val;
 *     ListNode next;
 *     ListNode(int x) {
 *         val = x;
 *         next = null;
 *     }
 * }
 */

import java.util.HashSet;
import java.util.Set;

/**
 * @Author duxiaopeng
 * @Date 2024/4/26 23:25
 * @Description 142-ç¯å½¢é“¾è¡¨ II æ–¹æ³•1ï¼šå“ˆå¸Œè¡¨ï¼Œæ–¹æ³•2ï¼šå¿«æ…¢æŒ‡é’ˆ
 */
public class DetectCycle142 {
    public ListNode detectCycle(ListNode head) {
        Set<ListNode> listNodes = new HashSet<>();
        while (head != null) {
            if (listNodes.contains(head)) {
                return head;
            }
            listNodes.add(head);
            head = head.next;
        }
        return null;
    }

    /**
     * @Author du-xp
     * @Date 2024/4/26
     * @param head:
     * @return: leetcode.listnode.ListNode
     * @Description å¿«æ…¢æŒ‡é’ˆçš„æ–¹æ³•ï¼Œå¿«æŒ‡é’ˆæ¯æ¬¡èµ°ä¸¤æ­¥ï¼Œæ…¢æŒ‡é’ˆæ¯æ¬¡èµ°ä¸€æ­¥ï¼Œå¦‚æœå¿«æ…¢æŒ‡é’ˆç›¸é‡ï¼Œåˆ™è¯´æ˜æœ‰ç¯ã€‚
     * å¿«æ…¢æŒ‡é’ˆç›¸é‡çš„èŠ‚ç‚¹å°±æ˜¯ç¯çš„å…¥å£èŠ‚ç‚¹
     * ç›¸é‡çš„èŠ‚ç‚¹ åˆ° ç¯çš„å…¥å£èŠ‚ç‚¹çš„è·ç¦» = å¤´èŠ‚ç‚¹ åˆ° ç›¸é‡èŠ‚ç‚¹çš„è·ç¦»
     *
     * ä»£ç éšæƒ³å½•
     * https://www.bilibili.com/list/525438321?tid=0&sort_field=pubtime&spm_id_from=333.999.0.0&oid=300762117&bvid=BV1if4y1d7ob
     */
    public ListNode detectCycle2(ListNode head) {
        ListNode fast = head;
        ListNode slow = head;
        while (fast != null && fast.next != null) {
            fast = fast.next.next;
            slow = slow.next;
            if (fast == slow) {
                ListNode index1 = head;
                ListNode index2 = slow;
                while (index1 != index2) {
                    index1 = index1.next;
                    index2 = index2.next;
                }
                return index1;
            }
        }
        return null;
    }
}
